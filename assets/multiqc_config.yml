# MultiQC Configuration for wf-ont-germline
# ==========================================

title: "ONT Germline WGS Analysis Report"
subtitle: "wf-ont-germline pipeline results"
intro_text: "This report summarizes quality control metrics and analysis results from the ONT germline variant calling pipeline."

report_comment: >
    This report was generated by the wf-ont-germline Nextflow pipeline.
    For more information, see the pipeline documentation.

# Report customization
show_analysis_paths: False
show_analysis_time: True

# Custom logo (optional)
# custom_logo: 'assets/logo.png'
# custom_logo_url: 'https://github.com/epi2me-labs/wf-ont-germline'
# custom_logo_title: 'wf-ont-germline'

# Report sections order
report_section_order:
    software_versions:
        order: -1000
    summary:
        order: -900
    nanoplot:
        order: -800
    mosdepth:
        order: -700
    samtools:
        order: -600
    bcftools:
        order: -500
    whatshap:
        order: -400
    custom_data:
        order: -300

# Module order
module_order:
    - nanoplot
    - mosdepth
    - samtools
    - bcftools
    - custom_content

# Modules to run
run_modules:
    - nanoplot
    - mosdepth
    - samtools
    - bcftools
    - custom_content

# Modules to skip
skip_modules:
    - fastqc  # Using NanoPlot instead for long reads

# Sample name cleaning
extra_fn_clean_exts:
    - '.sorted'
    - '.haplotagged'
    - '.phased'
    - '.clair3'
    - '.pepper_dv'
    - '.sniffles'
    - '.spectre'
    - '.vep'
    - '.clinvar'
    - '.gnomad'
    - '.annotated'

# Sample name patterns to ignore
fn_ignore_files:
    - '*.log'
    - '*_versions.yml'

# Table columns configuration
table_columns_visible:
    nanoplot:
        mean_qual: True
        mean_len: True
        n50: True
        total_bases: True
    mosdepth:
        mean_coverage: True
        median_coverage: True
        1_x_pc: True
        10_x_pc: True
        20_x_pc: True
        30_x_pc: True
    samtools:
        mapped_passed: True
        mapped_passed_pct: True
        avg_quality: True
    bcftools:
        number_of_records: True
        number_of_SNPs: True
        number_of_indels: True
        tstv: True

# Custom data for pipeline-specific metrics
custom_data:
    variant_summary:
        id: 'variant_summary'
        section_name: 'Variant Summary'
        description: 'Summary of variant calls from the pipeline'
        plot_type: 'table'
        pconfig:
            id: 'variant_summary_table'
            title: 'Variant Counts'
        headers:
            snv_count:
                title: 'SNVs'
                description: 'Number of single nucleotide variants'
                format: '{:,.0f}'
            indel_count:
                title: 'Indels'
                description: 'Number of insertions and deletions'
                format: '{:,.0f}'
            sv_count:
                title: 'SVs'
                description: 'Number of structural variants'
                format: '{:,.0f}'
            cnv_count:
                title: 'CNVs'
                description: 'Number of copy number variants'
                format: '{:,.0f}'
            phased_variants:
                title: 'Phased'
                description: 'Number of phased variants'
                format: '{:,.0f}'
            pathogenic_count:
                title: 'Pathogenic'
                description: 'ClinVar pathogenic/likely pathogenic variants'
                format: '{:,.0f}'

    methylation_summary:
        id: 'methylation_summary'
        section_name: 'Methylation Summary'
        description: 'Summary of methylation calls'
        plot_type: 'table'
        pconfig:
            id: 'methylation_summary_table'
            title: 'Methylation Statistics'
        headers:
            total_sites:
                title: 'CpG Sites'
                description: 'Total CpG sites analyzed'
                format: '{:,.0f}'
            mean_methylation:
                title: 'Mean Methylation'
                description: 'Mean methylation percentage'
                format: '{:.1f}%'
            mean_coverage:
                title: 'Mean Coverage'
                description: 'Mean coverage at CpG sites'
                format: '{:.1f}x'

# General statistics table configuration
general_stats_target_coverage: 30

# Plots configuration
plots_force_flat: False
plots_force_interactive: True

# Export options
export_plots: True

# Data export
data_format: 'tsv'

# Log level
log_filesize_limit: 50000000

# Color scheme
custom_plot_config:
    picard_insert_size:
        cpswitch_c_active: False

# Table configuration
table_cond_formatting_colours:
    - blue: '#337ab7'
    - lbue: '#5bc0de'
    - pass: '#5cb85c'
    - warn: '#f0ad4e'
    - fail: '#d9534f'

table_cond_formatting_rules:
    all_columns:
        pass:
            - gt: 0
    mean_coverage:
        pass:
            - gt: 30
        warn:
            - lt: 30
        fail:
            - lt: 10
    mapped_passed_pct:
        pass:
            - gt: 90
        warn:
            - lt: 90
        fail:
            - lt: 70
