/*
========================================================================================
    Test Configuration
========================================================================================
    Minimal test dataset configuration for CI/CD and quick testing
----------------------------------------------------------------------------------------
*/

params {
    config_profile_name        = 'Test profile'
    config_profile_description = 'Minimal test dataset to check pipeline function'
    
    // Limit resources for testing
    max_cpus   = 4
    max_memory = '8.GB'
    max_time   = '2.h'
    
    // Test input data (small chromosome region)
    input      = 'https://ont-exd-int-s3-euwst1-epi2me-labs.s3.amazonaws.com/wf-human-variation/test_data/chr20_test.fastq.gz'
    reference  = 'https://ont-exd-int-s3-euwst1-epi2me-labs.s3.amazonaws.com/wf-human-variation/test_data/chr20_test.fasta'
    
    // Sample name
    sample_name = 'test_sample'
    
    // Disable resource-intensive steps for testing
    call_svs           = true
    call_cnvs          = false
    phase_variants     = true
    call_methylation   = false
    annotate_variants  = false
    
    // Use Clair3 for faster testing
    variant_caller     = 'clair3'
    
    // Minimal Clair3 model for testing
    clair3_model       = '/opt/models/ont_r10_dorado_sup_4khz'
    
    // Output directory
    outdir             = './results_test'
}

// Reduce process resources for testing
process {
    withName: 'MINIMAP2_ALIGN' {
        cpus   = 2
        memory = '4.GB'
    }
    
    withName: 'CLAIR3' {
        cpus   = 2
        memory = '4.GB'
    }
    
    withName: 'SNIFFLES2' {
        cpus   = 2
        memory = '4.GB'
    }
    
    withName: 'WHATSHAP_PHASE' {
        cpus   = 2
        memory = '4.GB'
    }
}
